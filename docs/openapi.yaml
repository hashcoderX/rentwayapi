openapi: 3.0.3
info:
  title: Rentway API
  version: 1.0.0
  description: Stubbed OpenAPI for Rentway v1.
servers:
  - url: http://localhost/api/v1
paths:
  /auth/login:
    post:
      summary: Login and retrieve token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                password:
                  type: string
              required: [email, password]
      responses:
        '200':
          description: OK
  /auth/register:
    post:
      summary: Register user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: { type: string }
                email: { type: string }
                password: { type: string }
              required: [name, email, password]
      responses:
        '201':
          description: Created
  /vehicles:
    get:
      summary: List vehicles
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Create vehicle
      responses:
        '201': { description: Created }
  /vehicle/{id}:
    get:
      summary: Vehicle details
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: OK }
  /bookings:
    get:
      security: [{ bearerAuth: [] }]
      summary: List bookings
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessPaged'
    post:
      security: [{ bearerAuth: [] }]
      summary: Create booking
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BookingCreateRequest'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessWrap'
        '422':
          description: Overlap or validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorWrap'
  /services:
    get:
      summary: List services
      parameters:
        - in: query
          name: category
          schema: { type: string }
      responses:
        '200': { description: OK }
  /blacklist:
    get:
      security: [{ bearerAuth: [] }]
      summary: List blacklist
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Add to blacklist
      responses:
        '201': { description: Created }
  /ads:
    get:
      security: [{ bearerAuth: [] }]
      summary: List ads
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Create ad
      responses:
        '201': { description: Created }
  /ads/{id}:
    get:
      security: [{ bearerAuth: [] }]
      summary: Show ad
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: OK }
    put:
      security: [{ bearerAuth: [] }]
      summary: Update ad
      responses:
        '200': { description: Updated }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Delete ad
      responses:
        '204': { description: Deleted }
  /customers:
    get:
      security: [{ bearerAuth: [] }]
      summary: List customers
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Create customer
      responses:
        '201': { description: Created }
  /customers/{id}:
    get:
      security: [{ bearerAuth: [] }]
      summary: Show customer
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: OK }
    put:
      security: [{ bearerAuth: [] }]
      summary: Update customer
      responses:
        '200': { description: Updated }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Delete customer
      responses:
        '204': { description: Deleted }
  /companies:
    get:
      security: [{ bearerAuth: [] }]
      summary: List companies
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Create company
      responses:
        '201': { description: Created }
  /companies/{id}:
    get:
      security: [{ bearerAuth: [] }]
      summary: Show company
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: OK }
    put:
      security: [{ bearerAuth: [] }]
      summary: Update company
      responses:
        '200': { description: Updated }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Delete company
      responses:
        '204': { description: Deleted }
  /notifications:
    get:
      security: [{ bearerAuth: [] }]
      summary: List notifications
      responses:
        '200': { description: OK }
  /notifications/{id}:
    get:
      security: [{ bearerAuth: [] }]
      summary: Show notification
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: OK }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Delete notification
      responses:
        '204': { description: Deleted }
  /payments:
    get:
      security: [{ bearerAuth: [] }]
      summary: List payments
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Create payment
      responses:
        '201': { description: Created }
  /payments/{id}:
    get:
      security: [{ bearerAuth: [] }]
      summary: Show payment
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: OK }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Delete payment
      responses:
        '204': { description: Deleted }
  /expenses:
    get:
      security: [{ bearerAuth: [] }]
      summary: List expenses
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Create expense
      responses:
        '201': { description: Created }
  /expenses/{id}:
    get:
      security: [{ bearerAuth: [] }]
      summary: Show expense
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: OK }
    put:
      security: [{ bearerAuth: [] }]
      summary: Update expense
      responses:
        '200': { description: Updated }
    delete:
      security: [{ bearerAuth: [] }]
      summary: Delete expense
      responses:
        '204': { description: Deleted }
  /invoices:
    get:
      security: [{ bearerAuth: [] }]
      summary: List invoices
      responses:
        '200': { description: OK }
    post:
      security: [{ bearerAuth: [] }]
      summary: Create invoice
      responses:
        '201': { description: Created }
  /invoices/{id}:
    get:
      security: [{ bearerAuth: [] }]
      summary: Show invoice
      parameters:
        - in: path
          name: id
          required: true
          schema: { type: integer }
      responses:
        '200': { description: OK }
  /reports/summary:
    get:
      security: [{ bearerAuth: [] }]
      summary: Financial summary report
      parameters:
        - in: query
          name: company_id
          schema: { type: integer }
        - in: query
          name: month
          schema: { type: string }
        - in: query
          name: year
          schema: { type: integer }
      responses:
        '200': { description: OK }
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ApiEnvelope:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: OK
        data:
          nullable: true
    Pagination:
      type: object
      properties:
        current_page: { type: integer, example: 1 }
        last_page: { type: integer, example: 10 }
        per_page: { type: integer, example: 15 }
        total: { type: integer, example: 150 }
    SuccessWrap:
      allOf:
        - $ref: '#/components/schemas/ApiEnvelope'
      properties:
        data:
          type: object
    SuccessPaged:
      allOf:
        - $ref: '#/components/schemas/ApiEnvelope'
      properties:
        data:
          type: object
          properties:
            items:
              type: array
              items:
                type: object
            pagination:
              $ref: '#/components/schemas/Pagination'
    ErrorWrap:
      allOf:
        - $ref: '#/components/schemas/ApiEnvelope'
      example:
        success: false
        message: Validation failed
        data:
          errors:
            field: ['The field is required.']
    BookingCreateRequest:
      type: object
      required: [vehicle_no, book_start_date, pick_time, return_date, return_time]
      properties:
        vehicle_no: { type: string }
        book_start_date: { type: string, format: date }
        pick_time: { type: string, example: '10:00' }
        return_date: { type: string, format: date }
        return_time: { type: string, example: '16:00' }
        pick_location: { type: string }
        return_location: { type: string }
        wheretogo: { type: string }
        isdriver: { type: string, enum: [without_driver, with_driver, hire] }
        note: { type: string }
